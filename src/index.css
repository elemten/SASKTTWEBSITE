@tailwind base;
@tailwind components;
@tailwind utilities;

/* Table Tennis Saskatchewan Design System
Inspired by Apple's design language with colors derived from the TTS logo
(All colors mostly in HSL with a few hex brand tokens to match the current UI)
*/

/* Global Sora Font Application */
:root {
  --font-sans: 'Sora', system-ui, -apple-system, Segoe UI, Roboto, Inter, Helvetica, Arial, 'Apple Color Emoji', 'Segoe UI Emoji';

  /* Base colors - clean whites and subtle grays */
  --background: 0 0% 99%;
  --foreground: 0 0% 8%;

  /* Card system with subtle elevation */
  --card: 0 0% 100%;
  --card-foreground: 0 0% 8%;

  /* Popover and floating elements */
  --popover: 0 0% 100%;
  --popover-foreground: 0 0% 8%;

  /* Primary - derived from TTS green logo */
  --primary: 145 85% 25%;
  --primary-foreground: 0 0% 100%;
  --primary-light: 145 75% 35%;
  --primary-lighter: 145 65% 45%;

  /* Secondary - sophisticated grays */
  --secondary: 0 0% 96%;
  --secondary-foreground: 0 0% 15%;

  /* Muted tones for subtle elements */
  --muted: 0 0% 97%;
  --muted-foreground: 0 0% 45%;

  /* Accent - complementary to green */
  --accent: 145 60% 92%;
  --accent-foreground: 145 85% 15%;

  /* Status colors */
  --destructive: 0 84% 60%;
  --destructive-foreground: 0 0% 100%;
  --success: 145 85% 25%;
  --success-foreground: 0 0% 100%;
  --warning: 38 92% 50%;
  --warning-foreground: 0 0% 100%;

  /* UI elements */
  --border: 0 0% 90%;
  --input: 0 0% 100%;
  --input-border: 0 0% 85%;
  --ring: 145 85% 25%;

  /* Apple-inspired radius system */
  --radius: 1rem;
  --radius-sm: 0.5rem;
  --radius-lg: 1.5rem;
  --radius-xl: 2rem;

  /* Glass & shadows */
  --glass-bg: 255 255 255 / 0.8;
  --glass-border: 255 255 255 / 0.2;
  --shadow-soft: 0 4px 24px -1px hsl(0 0% 0% / 0.06);
  --shadow-medium: 0 8px 32px -4px hsl(0 0% 0% / 0.1);
  --shadow-strong: 0 16px 48px -8px hsl(0 0% 0% / 0.15);

  /* Animation timings */
  --transition-fast: 0.15s cubic-bezier(0.4, 0, 0.2, 1);
  --transition-normal: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  --transition-slow: 0.5s cubic-bezier(0.4, 0, 0.2, 1);

  /* Sidebar system */
  --sidebar-background: 0 0% 99%;
  --sidebar-foreground: 0 0% 15%;
  --sidebar-primary: 145 85% 25%;
  --sidebar-primary-foreground: 0 0% 100%;
  --sidebar-accent: 0 0% 96%;
  --sidebar-accent-foreground: 0 0% 15%;
  --sidebar-border: 0 0% 90%;
  --sidebar-ring: 145 85% 25%;

  /* === Navbar tokens === */
  --navH: 56px;
  --navFS: 14px;   /* slightly smaller labels */
  --navPadX: 10px; /* tighter pill padding */
  --navGap: 12px;
  --pillR: 999px;

  /* brand tokens (match existing UI) */
  --brandGreen: #0d7c4f;
  --brandGreenDark: #0a6a44;
  --hoverGreenBg: rgba(13,124,79,.08);
  --hoverGreenText: #0d7c4f;
  --navText: #0c1b0f;
  --white: #fff;
  --shadowDrop: 0 12px 28px rgba(0,0,0,.08);
}

.dark {
  /* Dark mode with sophisticated green accents */
  --background: 0 0% 8%;
  --foreground: 0 0% 95%;

  --card: 0 0% 10%;
  --card-foreground: 0 0% 95%;

  --popover: 0 0% 10%;
  --popover-foreground: 0 0% 95%;

  --primary: 145 75% 45%;
  --primary-foreground: 0 0% 8%;
  --primary-light: 145 65% 55%;
  --primary-lighter: 145 55% 65%;

  --secondary: 0 0% 12%;
  --secondary-foreground: 0 0% 90%;

  --muted: 0 0% 15%;
  --muted-foreground: 0 0% 65%;

  --accent: 145 60% 15%;
  --accent-foreground: 145 75% 85%;

  --destructive: 0 84% 60%;
  --destructive-foreground: 0 0% 8%;

  --success: 145 75% 45%;
  --success-foreground: 0 0% 8%;

  --warning: 38 92% 50%;
  --warning-foreground: 0 0% 8%;

  --border: 0 0% 20%;
  --input: 0 0% 12%;
  --input-border: 0 0% 25%;
  --ring: 145 75% 45%;

  --sidebar-background: 0 0% 8%;
  --sidebar-foreground: 0 0% 95%;
  --sidebar-primary: 145 75% 45%;
  --sidebar-primary-foreground: 0 0% 8%;
  --sidebar-accent: 0 0% 12%;
  --sidebar-accent-foreground: 0 0% 90%;
  --sidebar-border: 0 0% 20%;
  --sidebar-ring: 145 75% 45%;
}

/* Global font family enforcement */
html, body {
  font-family: var(--font-sans);
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

* { font-family: var(--font-sans); }

/* =========================
   NAVIGATION (clean & single source of truth)
   ========================= */
@layer components {
  .nav {
    position: sticky;
    top: 0;
    z-index: 1000;
    background: var(--white);
    border-bottom: 1px solid rgba(0,0,0,.04);
  }

  /* Ensure content doesn't hide behind sticky navigation */
  .page-content {
    padding-top: var(--navH);
  }

  /* Three-column grid: brand | menu | CTAs */
  .nav__inner{
    display: grid;
    grid-template-columns: auto minmax(0,1fr) auto; /* brand | center expands | ctas */
    align-items: center;
    column-gap: 20px;
    height: var(--navH);
    padding: 0 20px;             /* logo hugs left a bit more */
    max-width: 1440px;
    margin: 0 auto;
  }

  /* Brand (kept compact) */
  .brand{
    display: flex;
    align-items: center;
    gap: 10px;
    padding-right: 10px;        /* subtle separation */
    margin-right: 6px;
    border-right: 1px solid rgba(0,0,0,.06);
  }
  .brand__logo{
    width: 40px;
    height: 40px;
    object-fit: contain;
    flex-shrink: 0;
  }
  .brand__title{
    font-size: 18px;            /* reduced title width */
    line-height: 1.1;
    white-space: nowrap;
    font-weight: 600;
  }
  .brand__sub {
    font-size: 12px;
    opacity: 0.7;
    color: hsl(var(--muted-foreground));
  }

  /* Middle menu owns the center; never clips */
  .primary{
    min-width: 0;               /* allow content to shrink instead of overflow */
    display: flex;
    justify-content: center;    /* center items in the middle column */
  }
  .primary__list {
    display: flex;
    align-items: center;
    gap: 12px;
    list-style: none;
    margin: 0;
    padding: 0;
    flex-wrap: nowrap;          /* one line */
    overflow: visible;          /* show all items */
  }

  /* Uniform nav pills */
  .nav-item{
    display: inline-flex;
    align-items: center;
    justify-content: center;
    height: var(--navH);
    line-height: var(--navH);
    padding: 0 var(--navPadX);
    border-radius: var(--pillR);
    font-size: var(--navFS);
    font-weight: 600;
    color: var(--navText);
    background: transparent;
    border: 0;
    cursor: pointer;
    text-decoration: none;
    transition: background-color .18s ease, color .18s ease;
    white-space: nowrap;
  }
  .nav-item:hover,
  .nav-item:focus-visible {
    background: var(--hoverGreenBg);
    color: var(--hoverGreenText);
    outline: none;
  }
  .nav-item--active {
    background: var(--hoverGreenBg);
    color: var(--hoverGreenText);
  }

  /* dropdown trigger chevron */
  .chev {
    display: inline-block;
    margin-left: 8px;
    width: 10px;
    height: 10px;
    border-right: 2px solid currentColor;
    border-bottom: 2px solid currentColor;
    transform: rotate(45deg);
    transition: transform .18s ease;
  }
  .has-dropdown[aria-expanded="true"] .chev { transform: rotate(-135deg); }

  /* dropdown panel */
  .has-dropdown { position: relative; }
  .dropdown {
    position: absolute;
    left: 0;
    top: calc(100% + 10px);
    min-width: 240px;
    background: var(--white);
    border-radius: 12px;
    box-shadow: var(--shadowDrop);
    padding: 8px;
    opacity: 0;
    transform: translateY(4px);
    pointer-events: none;
    transition: opacity .18s ease, transform .18s ease, visibility .18s;
    visibility: hidden;
  }
  .dropdown--open {
    opacity: 1;
    transform: translateY(0);
    pointer-events: auto;
    visibility: visible;
  }
  .dropdown__item {
    display: flex;
    align-items: center;
    height: 44px;
    padding: 0 10px;
    border-radius: 10px;
    color: var(--navText);
    text-decoration: none;
    font-weight: 500;
    transition: background-color .18s ease, color .18s ease;
  }
  .dropdown__item:hover {
    background: var(--hoverGreenBg);
    color: var(--hoverGreenText);
  }

  /* CTAs lock to the right */
  .cta{
    justify-self: end;
    display: flex;
    gap: 12px;
    white-space: nowrap;
    padding-left: 8px;
    margin-left: 4px;
  }
  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    height: var(--navH);
    padding: 0 18px;
    border-radius: var(--pillR);
    font-weight: 700;
    text-decoration: none;
    white-space: nowrap;
    transition: filter .18s ease, background-color .18s ease, color .18s ease;
  }
  .btn--ghost { background: rgba(0,0,0,.04); color: var(--navText); }
  .btn--ghost:hover { background: rgba(0,0,0,.06); }
  .btn--primary { background: var(--brandGreen); color: var(--white); }
  .btn--primary:hover { background: var(--brandGreenDark); }

  /* Desktop guards */
  @media (min-width: 1024px) {
    .primary__list { flex-wrap: nowrap; }
  }

  /* Mobile: hide primary (you can wire a drawer later) */
  @media (max-width: 1023px) {
    .primary { display: none; }
  }
}

/* =========================
   Buttons / Cards / Hero polish (kept from your file)
   ========================= */
@layer components {
  /* Enhanced Button System - Extending existing buttonVariants */

  /* Base button enhancements - applies to all button variants */
  .btn,
  .button,
  .cta,
  [data-variant] {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 10px;

    transition:
      transform 180ms cubic-bezier(.2,.8,.2,1),
      box-shadow 220ms cubic-bezier(.2,.8,.2,1),
      background-color 180ms ease,
      color 180ms ease;

    min-height: 52px;
    padding: 0 20px;
    font-weight: 600;
    line-height: 1;
    letter-spacing: .2px;
    border: none;
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
    transform: translateZ(0);
    font-family: var(--font-sans);
  }

  .btn:hover,
  .button:hover,
  .cta:hover,
  [data-variant]:hover {
    transform: translateY(-1px);
    box-shadow: 0 8px 24px rgba(0,0,0,.08);
  }

  .btn:active,
  .button:active,
  .cta:active,
  [data-variant]:active {
    transform: translateY(0);
    box-shadow: 0 6px 16px rgba(0,0,0,.06);
  }

  .btn:focus-visible,
  .button:focus-visible,
  .cta:focus-visible,
  [data-variant]:focus-visible {
    outline: 0;
    box-shadow:
      0 0 0 4px rgba(255,255,255,0.85),
      0 0 0 6px rgba(16,151,104,0.85);
  }

  .btn:disabled,
  .button:disabled,
  .cta:disabled,
  [data-variant]:disabled {
    opacity: .5;
    cursor: not-allowed;
    transform: none;
    box-shadow: none;
  }

  @media (prefers-reduced-motion: reduce) {
    .btn, .button, .cta, [data-variant] { transition: none; }
  }

  .bg-gradient-primary {
    background: linear-gradient(135deg, hsl(var(--primary)), hsl(var(--primary-light)));
  }
  .bg-gradient-subtle {
    background: linear-gradient(135deg, hsl(var(--background)), hsl(var(--muted)));
  }

  .btn-smooth { transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1); transform: translateZ(0); }
  .btn-smooth:hover { transform: translateZ(0) translateY(-2px); }

  .card-hover {
    transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1),
                box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    transform: translateZ(0);
  }
  .card-hover:hover { transform: translateZ(0) translateY(-4px); }

  .hero__actions {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 16px;
    flex-wrap: wrap;
    margin-top: 24px;
  }

  .card__body {
    display: grid;
    grid-template-rows: auto 1fr auto;  /* title | content | actions */
    gap: 12px;
  }
  .card__actions { margin-top: 8px; }

  .hero .hero-title {
    color: #FFFFFF;
    text-shadow: 0 2px 14px rgba(0, 0, 0, 0.35);
    filter: drop-shadow(0 2px 12px rgba(0,0,0,0.25));
  }
  .hero .hero-subtitle {
    color: #EAFBF4;
    text-shadow: 0 1px 8px rgba(0, 0, 0, 0.25);
  }
  .hero .neon-badge {
    font-family: 'Sora', system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial, sans-serif;
    font-weight: 600;
    letter-spacing: 0.02em;
    text-shadow: none;
    filter: none;
  }

  .group { transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1); transform: translateZ(0); }
  .group:hover { transform: translateZ(0) translateY(-8px); }
  .group:hover .inline-flex { transform: scale(1.05); box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15); }
  .group:hover svg { transform: scale(1.1) rotate(5deg); }
  .group:hover h3 { color: hsl(var(--primary)); }
  .group:hover button { background-color: hsl(var(--primary-light)); transform: translateY(-1px); }
}

/* =========================
   Utilities & Performance
   ========================= */
@layer utilities {
  .gpu-accelerated { transform: translateZ(0); will-change: transform; backface-visibility: hidden; perspective: 1000px; }
  .no-layout-shift { contain: layout style paint; }
  .smooth-scroll { scroll-behavior: smooth; -webkit-overflow-scrolling: touch; }
  .performance-container { contain: layout style paint; will-change: transform; }
  .animate-gpu { transform: translateZ(0); will-change: transform, opacity; backface-visibility: hidden; }

  .hover-optimized {
    transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1),
                box-shadow 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    will-change: transform, box-shadow;
  }

  .touch-optimized { -webkit-tap-highlight-color: transparent; touch-action: manipulation; }
  .scroll-optimized { -webkit-overflow-scrolling: touch; overscroll-behavior: contain; scroll-behavior: smooth; }

  /* Mobile performance optimizations */
  @media (max-width: 768px) {
    *, *::before, *::after {
      animation-duration: 0.2s !important;
      animation-delay: 0s !important;
      transition-duration: 0.2s !important;
      transition-delay: 0s !important;
    }
    .animate-gpu { transform: none !important; will-change: auto !important; animation: none !important; }
    button, .btn, [role="button"] { -webkit-tap-highlight-color: transparent; touch-action: manipulation; transform: none !important; transition: none !important; }

    @media (hover: none) {
      .group:hover .group-hover\:scale-105 { transform: none !important; }
      .hover\:scale-105:hover { transform: none !important; }
      .hover\:shadow-xl:hover { box-shadow: none !important; }
    }
  }

  /* Low-end device optimizations */
  @media (max-width: 480px) {
    *, *::before, *::after { animation: none !important; transition: none !important; transform: none !important; }
    .animate-gpu, .gpu-accelerated { will-change: auto !important; }
    .shadow-soft, .shadow-medium, .shadow-strong, .shadow-lg, .shadow-xl { box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1) !important; }
  }

  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
    .animate-gpu, .gpu-accelerated { transform: none !important; will-change: auto !important; }
  }

  /* Enhanced text readability on dark backgrounds (hero) */
  .hero h1, .hero h2, .hero h3, .hero p, .hero span, .hero div {
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.7), 0 0 15px rgba(255, 255, 255, 0.1);
  }
  .hero .text-white { text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8), 0 0 20px rgba(255, 255, 255, 0.15); }
  .hero .text-white\/90, .hero .text-white\/70 { text-shadow: 0 1px 3px rgba(0, 0, 0, 0.7), 0 0 12px rgba(255, 255, 255, 0.1); }
  .hero .bg-gradient-primary { text-shadow: 0 2px 6px rgba(0, 0, 0, 0.9), 0 0 25px rgba(255, 255, 255, 0.2); }

  @media (max-width: 768px) {
    .hero h1, .hero h2, .hero p, .hero span {
      text-shadow: 0 3px 6px rgba(0, 0, 0, 0.9), 0 0 25px rgba(255, 255, 255, 0.2);
    }
  }

  .animate-60fps { transition: all 0.16s cubic-bezier(0.4, 0, 0.2, 1); }
  .animate-smooth-enter { transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1), transform 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
  .animate-smooth-exit  { transition: opacity 0.2s cubic-bezier(0.4, 0, 0.2, 1), transform 0.2s cubic-bezier(0.4, 0, 0.2, 1); }
}

/* =========================
   Hero background colors (kept)
   ========================= */
@layer components {
  :root {
    --tt-green: #0b7d59;
    --tt-green-dark: #0a6e50;
  }

  #home-hero {
    background: linear-gradient(180deg, var(--tt-green) 0%, #10a678 55%, #12b07b 100%);
  }

  .hero-cta { transition: all 0.2s ease-in-out; font-family: var(--font-sans); }
  .hero-cta:focus-visible { outline: 2px solid var(--tt-green); outline-offset: 2px; }

  button:focus-visible, a:focus-visible {
    outline: 2px solid var(--tt-green);
    outline-offset: 2px;
  }
}
